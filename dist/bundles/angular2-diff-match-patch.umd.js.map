{"version":3,"file":"angular2-diff-match-patch.umd.js.map","sources":["ng://angular2-diff-match-patch/src/dmp.service.ts","ng://angular2-diff-match-patch/src/line-diff.component.ts","ng://angular2-diff-match-patch/ng2-diff.module.ts"],"sourcesContent":["export class DiffMatchPachService {\n    private static displayType:any = {\n        INSDEL: 0,\n        LINEDIFF: 1\n    };\n\n    private diffClass(op) {\n        switch (op) {\n            case (<any>window).diff_match_patch.DIFF_INSERT:\n                return 'ins';\n            case (<any>window).diff_match_patch.DIFF_DELETE:\n                return 'del';\n            default: // case DIFF_EQUAL:\n                return 'match';\n        }\n    }\n\n    private diffSymbol(op) {\n        switch (op) {\n            case (<any>window).diff_match_patch.DIFF_INSERT:\n                return '+';\n            case (<any>window).diff_match_patch.DIFF_DELETE:\n                return '-';\n            default: // case DIFF_EQUAL:\n                return ' ';\n        }\n    }\n\n    private diffTag(op) {\n        switch (op) {\n            case (<any>window).diff_match_patch.DIFF_INSERT:\n                return 'ins';\n            case (<any>window).diff_match_patch.DIFF_DELETE:\n                return 'del';\n            default: // case DIFF_EQUAL:\n                return 'span';\n        }\n    }\n\n    private diffAttrName(op) {\n        switch (op) {\n            case (<any>window).diff_match_patch.DIFF_INSERT:\n                return 'insert';\n            case (<any>window).diff_match_patch.DIFF_DELETE:\n                return 'delete';\n            default: // case DIFF_EQUAL:\n                return 'equal';\n        }\n    }\n\n    private isEmptyObject(o) {\n        return Object.getOwnPropertyNames(o).length === 0;\n    }\n\n    private isDefined(o) {\n        return o != undefined;\n    }\n\n    private getTagAttrs(options, op, attrs?) {\n        var attributes = attrs || {};\n        var tagOptions = {};\n        var attribute;\n        var tagOption;\n        var retVal = [];\n\n        if (options != undefined && options.attrs != undefined) {\n            tagOptions = Object.assign(options.attrs[this.diffAttrName(op)] || {});\n        }\n\n        if (this.isEmptyObject(tagOptions) && this.isEmptyObject(attributes)) {\n            return '';\n        }\n\n        for (attribute in attributes) {\n            if (this.isDefined(tagOptions[attribute])) {\n                // The attribute defined in attributes should be first\n                tagOptions[attribute] = attributes[attribute] + ' ' + tagOptions[attribute];\n            } else {\n                tagOptions[attribute] = attributes[attribute];\n            }\n        }\n\n        /* eslint guard-for-in: \"off\" */\n        for (tagOption in tagOptions) {\n            retVal.push(tagOption + '=\"' + tagOptions[tagOption] + '\"');\n        }\n        return ' ' + retVal.join(' ');\n    }\n\n    private getHtmlPrefix(op, display, options) {\n        switch (display) {\n            case DiffMatchPachService.displayType.LINEDIFF:\n                return '<div class=\"' + this.diffClass(op) + '\"><span' + this.getTagAttrs(options, op, {class: 'noselect'}) + '>' + this.diffSymbol(op) + '</span>';\n            default: // case displayType.INSDEL:\n                return '<' + this.diffTag(op) + this.getTagAttrs(options, op) + '>';\n        }\n    }\n\n    private getHtmlSuffix(op, display) {\n        switch (display) {\n            case DiffMatchPachService.displayType.LINEDIFF:\n                return '</div>';\n            default: // case displayType.INSDEL:\n                return '</' + this.diffTag(op) + '>';\n        }\n    }\n\n    private createHtmlLines(text, op, options) {\n        var lines = text.split('\\n');\n        var y;\n        for (y = 0; y < lines.length; y++) {\n            if (lines[y].length === 0) {\n                continue;\n            }\n            lines[y] = this.getHtmlPrefix(op, DiffMatchPachService.displayType.LINEDIFF, options) + lines[y] + this.getHtmlSuffix(op, DiffMatchPachService.displayType.LINEDIFF);\n        }\n        return lines.join('');\n    }\n\n    private createHtmlFromDiffs(diffs, display, options) {\n        var patternAmp = /&/g;\n        var patternLt = /</g;\n        var patternGt = />/g;\n        var x;\n        var html = [];\n        var y;\n        var data;\n        var op;\n        var text;\n        var diffData = diffs;\n\n        for (x = 0; x < diffData.length; x++) {\n            data = diffData[x][1];\n            diffData[x][1] = data.replace(patternAmp, '&amp;')\n                .replace(patternLt, '&lt;')\n                .replace(patternGt, '&gt;');\n        }\n\n        for (y = 0; y < diffData.length; y++) {\n            op = diffData[y][0];\n            text = diffData[y][1];\n            if (display === DiffMatchPachService.displayType.LINEDIFF) {\n                html[y] = this.createHtmlLines(text, op, options);\n            } else {\n                html[y] = this.getHtmlPrefix(op, display, options) + text + this.getHtmlSuffix(op, display);\n            }\n        }\n        return html.join('');\n    }\n\n    private isString(myVar) {\n        return (typeof myVar === 'string' || myVar instanceof String);\n    }\n\n    private assertArgumentsIsStrings(left, right) {\n        return this.isString(left) && this.isString(right);\n    }\n\n    public createDiffHtml(left, right, options) {\n        var dmp;\n        var diffs;\n        if (this.assertArgumentsIsStrings(left, right)) {\n            dmp = new (<any>window).diff_match_patch.diff_match_patch();\n            diffs = dmp.diff_main(left, right);\n            return this.createHtmlFromDiffs(diffs, DiffMatchPachService.displayType.INSDEL, options);\n        }\n        return '';\n    }\n\n//    createProcessingDiffHtml: function createProcessingDiffHtml(left, right, options) {\n//    var dmp;\n//    var diffs;\n//    if (assertArgumentsIsStrings(left, right)) {\n//        dmp = new (<any>window).diff_match_patch();\n//        diffs = dmp.diff_main(left, right);\n//\n//        if (angular.isDefined(options) && angular.isDefined(options.editCost) && isFinite(options.editCost)) {\n//            dmp.Diff_EditCost = options.editCost; // eslint-disable-line camelcase\n//        }\n//\n//        dmp.diff_cleanupEfficiency(diffs);\n//        return createHtmlFromDiffs(diffs, displayType.INSDEL, options);\n//    }\n//    return '';\n//},\n//\n//    createSemanticDiffHtml: function createSemanticDiffHtml(left, right, options) {\n//    var dmp;\n//    var diffs;\n//    if (assertArgumentsIsStrings(left, right)) {\n//        dmp = new (<any>window).diff_match_patch();\n//        diffs = dmp.diff_main(left, right);\n//        dmp.diff_cleanupSemantic(diffs);\n//        return createHtmlFromDiffs(diffs, displayType.INSDEL, options);\n//    }\n//    return '';\n//},\n\n    public createLineDiffHtml(left, right, options) {\n        var dmp;\n        var chars;\n        var diffs;\n        if (this.assertArgumentsIsStrings(left, right)) {\n            dmp = new (<any>window).diff_match_patch.diff_match_patch();\n            chars = dmp.diff_linesToChars_(left, right);\n            diffs = dmp.diff_main(chars.chars1, chars.chars2, false);\n            dmp.diff_charsToLines_(diffs, chars.lineArray);\n            return this.createHtmlFromDiffs(diffs, DiffMatchPachService.displayType.LINEDIFF, options);\n        }\n        return '';\n    }\n}\n","import {Directive, Input, SimpleChanges, ElementRef, OnInit, OnChanges}         from '@angular/core';\n\nimport {DiffMatchPachService} from './dmp.service';\n\n@Directive({\n    selector: '[line-diff]',\n    providers: [\n        DiffMatchPachService\n    ]\n})\nexport class LineDiffComponent implements OnInit, OnChanges {\n    @Input() left:string;\n    @Input() right:string;\n    @Input() options:{} = {};\n\n    constructor(private el:ElementRef, private dmp:DiffMatchPachService) {\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        this.el.nativeElement.innerHTML = this.dmp.createLineDiffHtml(this.left, this.right, this.options);\n    }\n\n    public ngOnInit() {\n        this.el.nativeElement.innerHTML = this.dmp.createLineDiffHtml(this.left, this.right, this.options);\n    }\n}\n","import {LineDiffComponent} from './src/line-diff.component';\n\nimport {NgModule} from '@angular/core';\n\n@NgModule({\n    exports: [\n        LineDiffComponent\n    ],\n    declarations: [\n        LineDiffComponent\n    ],\n    imports: []\n})\nexport class Ng2DiffModule {\n}\n"],"names":["Directive","ElementRef","Input","NgModule"],"mappings":"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"}
